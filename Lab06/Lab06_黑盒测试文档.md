## 黑盒测试报告

1. 等价类划分

   | 输入及外部条件                        | 有效等价类               | **等价类编号** | 无效等价类                 | 等价类编号 |
   | ------------------------------------- | ------------------------ | -------------- | -------------------------- | ---------- |
   | 输入的类型                            | 数字字符                 | 1              | 非数字字符                 | 11         |
   | $year$                                |                          |                | $year \ge 2023$            | 12         |
   | $month$                               | $1 \leq month \leq 12$   | 2              | $month \lt 1$              | 13         |
   | $month$                               |                          |                | $month \gt 12$             | 14         |
   | 非闰年的 2 月                         | $1 \leq day \leq 28$     | 3              | $day \lt 1$                | 15         |
   | 非闰年的 2 月                         |                          |                | $day \gt 28$               | 16         |
   | 闰年的 2 月                           | $1 \leq day \leq 29$     | 4              | $day \lt 1$                | 17         |
   | 闰年的 2 月                           |                          |                | $day \gt 29$               | 18         |
   | $month \in \{1, 3, 5, 7, 8, 10, 12\}$ | $1 \leq day \leq 31$     | 5              | $day \lt 1$                | 19         |
   | $month \in \{1, 3, 5, 7, 8, 10, 12\}$ |                          |                | $day \gt 31$               | 20         |
   | $month \in \{4, 6, 9, 11\}$           | $1 \leq day \leq 30$     | 6              | $day \lt 1$                | 21         |
   | $month \in \{4, 6, 9, 11\}$           |                          |                | $day \gt 30$               | 22         |
   | 校验码                                | 校验码与加权和模 11 对应 | 7              | 校验码与加权和模 11 不对应 | 23         |
   | 校验码                                | 校验码 X 大写            | 8              |                            |            |
   | 校验码                                | 校验码 X 小写            | 9              |                            |            |
   | 身份证号长度                          | 长度为 18 位             | 10             | 长度超过 18 位             | 24         |
   | 身份证号长度                          |                          |                | 长度小于 18 位             | 25         |

2. 对应的测试用例数据

   - 有效等价类

     | 测试数据           | 期望输出 | 覆盖等价类编号 | 实际输出 |
     | ------------------ | -------- | -------------- | -------- |
     | 34292120020720253X | 1        | 1 2 5 7 8 10   | 1        |
     | 34292120020720253x | 1        | 1 2 5 7 9 10   | 0        |
     | 123456200201011233 | 1        | 1 2 5 7 10     | 1        |
     | 123456200201311236 | 1        | 1 2 5 7 10     | 0        |
     | 123456200202011235 | 1        | 1 2 3 7 10     | 1        |
     | 123456200202281235 | 1        | 1 2 3 7 10     | 1        |
     | 123456200002291236 | 1        | 1 2 4 7 10     | 0        |
     | 123456190002281234 | 1        | 1 2 3 7 10     | 1        |
     | 123456200204011239 | 1        | 1 2 6 7 10     | 1        |
     | 123456200204301236 | 1        | 1 2 6 7 10     | 0        |

   - 无效等价类

     | 测试数据            | 期望输出 | 覆盖等价类编号 | 实际输出 |
     | ------------------- | -------- | -------------- | -------- |
     | A12345678901234567  | 0        | 11             | 0        |
     | 123456202302201238  | 0        | 12             | 1        |
     | 123456200200011231  | 0        | 13             | 1        |
     | 123456200213011230  | 0        | 14             | 1        |
     | 12345620020200123X  | 0        | 15             | 0        |
     | 123456200202291230  | 0        | 16             | 0        |
     | 123456200402001234  | 0        | 17             | 0        |
     | 123456200402301237  | 0        | 18             | 0        |
     | 123456200201001238  | 0        | 19             | 0        |
     | 123456200201321231  | 0        | 20             | 0        |
     | 123456200204001233  | 0        | 21             | 0        |
     | 123456200204311231  | 0        | 22             | 0        |
     | 123456200202201230  | 0        | 23             | 0        |
     | 123456200202201232  | 0        | 23             | 0        |
     | 123456200202201233  | 0        | 23             | 0        |
     | 123456200202201234  | 0        | 23             | 0        |
     | 123456200202201235  | 0        | 23             | 0        |
     | 123456200202201236  | 0        | 23             | 0        |
     | 123456200202201237  | 0        | 23             | 0        |
     | 123456200202201238  | 0        | 23             | 0        |
     | 123456200202201239  | 0        | 23             | 0        |
     | 12345620020220123X  | 0        | 23             | 0        |
     | 1234562002022012310 | 0        | 24             | 1        |
     | 12345620020220123   | 0        | 25             | 0        |

3. 测试结果及说明（注释）

   ![截屏2022-04-23 00.12.57](https://cdn.jsdelivr.net/gh/hjc-owo/hjc-owo.github.io@img/202204230013663.png)

   <img src="https://cdn.jsdelivr.net/gh/hjc-owo/hjc-owo.github.io@img/202204232105271.png" alt="截屏2022-04-23 21.04.42" style="zoom:67%;" />

   ```python
   import unittest

   from White import Triangle
   from Black import CheckId

   d = [1, 0, 10, 9, 8, 7, 6, 5, 4, 3, 2]
   weight = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]


   class MyTest(unittest.TestCase):
       def testId(self):
           # Black 传入身份证号，调用 exec 返回验证的结果
           test_sum = 0
           test_id = '123456'  # default
           test_id += '2002'  # year
           test_id += '02'  # month
           test_id += '20'  # day
           test_id += '123'  # number
           for i in range(17):
               test_sum += weight[i] * int(test_id[i])
           if d[test_sum % 11] == 10:
               test_id += 'X'
           else:
               test_id += str(d[test_sum % 11])
           test_id += '0'  # 增加一位长度, 长度大于18
           print(test_id)
           self.assertEqual(CheckId.Black(test_id).exec(), 0)

           # 有效等价类
           self.assertEqual(CheckId.Black('34292120020720253X').exec(), 1)  # 1, 大写X, 1 2 5 7 8 10
           self.assertEqual(CheckId.Black('34292120020720253x').exec(), 1)  # 0, 小写x, 1 2 5 7 9 10
           self.assertEqual(CheckId.Black('123456200201011233').exec(), 1)  # 1, 1月1日, 1 2 5 7 10
           self.assertEqual(CheckId.Black('123456200201311236').exec(), 1)  # 0, 1月31日, 1 2 5 7 10
           self.assertEqual(CheckId.Black('123456200202011235').exec(), 1)  # 1, 2月1日, 1 2 3 7 10
           self.assertEqual(CheckId.Black('123456200202281235').exec(), 1)  # 1, 非闰年2002年2月28日, 1 2 3 7 10
           self.assertEqual(CheckId.Black('123456200002291236').exec(), 1)  # 0, 闰年2000年2月29日, 1 2 4 7 10
           self.assertEqual(CheckId.Black('123456190002281234').exec(), 1)  # 1, 非闰年1900年2月28日, 1 2 3 7 10
           self.assertEqual(CheckId.Black('123456200204011239').exec(), 1)  # 1, 4月1日, 1 2 6 7 10
           self.assertEqual(CheckId.Black('123456200204301236').exec(), 1)  # 0, 4月30日, 1 2 6 7 10
           # 无效等价类
           self.assertEqual(CheckId.Black('A12345678901234567').exec(), 0)  # 0, 非数字字符, 11
           self.assertEqual(CheckId.Black('123456202302201238').exec(), 0)  # 1, 2023年, 12
           self.assertEqual(CheckId.Black('123456200200011231').exec(), 0)  # 1, 0月, 13
           self.assertEqual(CheckId.Black('123456200213011230').exec(), 0)  # 1, 13月, 14
           self.assertEqual(CheckId.Black('12345620020200123X').exec(), 0)  # 0, 非闰年2月0日, 15
           self.assertEqual(CheckId.Black('123456200202291230').exec(), 0)  # 0, 非闰年2月29日, 16
           self.assertEqual(CheckId.Black('123456200402001234').exec(), 0)  # 0, 闰年2月0日, 17
           self.assertEqual(CheckId.Black('123456200402301237').exec(), 0)  # 0, 闰年2月30日, 18
           self.assertEqual(CheckId.Black('123456200201001238').exec(), 0)  # 0, 1月0日, 19
           self.assertEqual(CheckId.Black('123456200201321231').exec(), 0)  # 0, 1月32日, 20
           self.assertEqual(CheckId.Black('123456200204001233').exec(), 0)  # 0, 4月0日, 21
           self.assertEqual(CheckId.Black('123456200204311231').exec(), 0)  # 0, 4月31日, 22
           self.assertEqual(CheckId.Black('1234562002022012310').exec(), 0)  # 1, 长度大于18, 24
           self.assertEqual(CheckId.Black('12345620020220123').exec(), 0)  # 0, 长度小于18, 25
           # 测试校验码部分代码
           for i in range(11):
               if i != d[test_sum % 11]:
                   li = list(test_id)
                   if i == 10:
                       li[17] = 'X'
                   else:
                       li[17] = str(i)
                   test_id = ''.join(li)
                   print(test_id)
                   self.assertEqual(CheckId.Black(test_id).exec(), 0)
           # 0, 校验码不匹配, 23
           # 123456200202201230
           # 123456200202201232
           # 123456200202201233
           # 123456200202201234
           # 123456200202201235
           # 123456200202201236
           # 123456200202201237
           # 123456200202201238
           # 123456200202201239
           # 12345620020220123X

           pass


   # 运行测试
   if __name__ == '__main__':
       unittest.main()

   ```

4. BUG 的汇总
   - 校验码的小写 x 并不能识别
   - 不能判断大月（1 月）的 31 日
   - 不能判断闰年的 2 月 的 29 日
   - 不能判断小月（4 月）的 30 日
   - 未来的 2023 年居然有身份证号
   - 0 月和 13 月都可以通过，没有判断月份的范围
   - 没有判断身份证号的长度
